<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">订单详情</h1>
		</header>
		<div class="mui-content">
			<table id="pic-table" border="0" cellspacing="" cellpadding="">
				<tr v-for="item in items">
					<!--<td>{{item.src}}</td>-->
					<td><img v-bind:src="'http://39.108.159.175/phpworkplace/mui/pic/'+item.src" width="20%"/></td>
				</tr>
			</table>
		</div>
		<script src="../../js/mui.min.js"></script>
		<script src="../../js/vue.min.js"></script>
		<script type="text/javascript">
			mui.init()
		</script>

		<script type="text/javascript">
			//			var list = new Vue({
			//				el:"#pic-table",
			//				data:{
			//					items:[]
			//				}
			//			});
				var list = new Vue({
						el: "#pic-table",
						data: {
							items:[]
						}
					});
			window.addEventListener('order-detail', function(event) {
				var orderId = new Number(event.detail.id);
				var content = event.detail.content;
				var theme = event.detail.theme;
				var status = event.detail.status;
				var endTime = event.detail.endTime;
				var sellerId = event.detail.sellerId;
				var sellerName = event.detail.sellerName;
				var sellerIcon = event.detail.sellerIcon;
//				alert(orderId);return;
				//				alert(orderId+"  "+content+"  "+theme+"  "+status+"  "+endTime+"  "+sellerId+"  "+sellerName+"  "+sellerIcon);
				//接收完传输过来的数据
				//				展示在页面
				//				1.展示商家产品图片列表
				//				a.根据orderid接收图片路径json
				mui.post('http://39.108.159.175/phpworkplace/mui/order/getOrderPic.php', {
					orderid: orderId
				}, function(data) {
					//get  json
					var paths = [];
					for(var i = 0; i < data.length; i++) {
						//						paths[i]=data[i].orderpicsrc;
						paths.push({
							src: data[i].orderpicsrc
						});
						//						list.items.push({src:data[i].orderpicsrc});
					}
						console.log("data.length"+data.length);
						console.log("paths.length"+paths.length);
					//					list.items.concat(paths);
					list.items=paths;
					
				}, 'json');

			});
		</script>
	</body>

</html>